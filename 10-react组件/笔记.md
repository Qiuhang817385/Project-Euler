react和reactDom

视图模型的一个控制

视图的模板是用JSX来描述的  

最后会被替换成为createElemnet

React.createElemnet

会生成一个虚拟DOM

用来描述dom结构

虚拟DOM的作用

保存界面的形态,数据将来要去哪里展示

将来react帮我们维护一组数据

状态或者属性

当属性或者状态改变的时候进行重新渲染

组件调用render函数

把createElemnt创建的数据和之前的数据进行对比

diff算法

对比得到不同点

进行DOM补丁替换



为什么能跨平台写很多东西 这就是原理



函数组件的props就是props

类组件  this.props

 

![image-20200302201657987](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302201657987.png)

想要立刻拿到最新的值

就用函数的形式使用其中的参数state

this必须指向当前组件的实例



![image-20200302202211233](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302202211233.png)

直接使用箭头函数

现在的方法有了明确的指向,保证是this当前组件实例



## React公式

UI = F(state)

## 按需加载

![image-20200302225352612](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302225352612.png)

npm i react-app-rewired@2.0.2-next.0 babel-plugin-import --save

module.export是nodejs语法

![image-20200302225715590](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302225715590.png)

![image-20200302225756310](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302225756310.png)







## 组件

![image-20200302225907755](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302225907755.png)

![image-20200302230001266](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230001266.png)

![image-20200302230016272](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230016272.png)





## 需求

父子组件

子组件负责不停的展示

父组件需要不断的轮训state,但是子组件没有变

15.3版本  专门解决

![image-20200302230404394](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230404394.png)

========

![image-20200302230453159](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230453159.png)

![image-20200302230512142](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230512142.png)

每次如果传递给子组件的数据  --- 对象(引用不停的改变  那么子组件依然会刷新

每次都认为传递的是新的数据

这是pure的缺点,要么传递值类型的属性,要么传递地址不会变的数据,必须使用class的方式

![image-20200302230805048](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230805048.png)

![image-20200302230851906](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200302230851906.png)\属性展开,直接使用body和author就可以规避这个问题

属性延展的用处



![image-20200303094540054](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303094540054.png)

每次setInterval的时候生成的都是全新的数组



测试页面是否被刷新多次

可以直接在子组件当中打印,查看子组件被渲染的次数



## 16.6的版本

memo函数 代替pure

![image-20200303095721944](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303095721944.png)

![image-20200303095912850](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303095912850.png)



## 高阶组件

接受一个组件

返回一个新组件

![image-20200303100128894](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303100128894.png)

![image-20200303100553282](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303100553282.png)

![image-20200303100627567](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303100627567.png)



改写生命周期

可以写成匿名类

![image-20200303101119662](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101119662.png)



嵌套HOC

![image-20200303101359432](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101359432.png)



上面的比较累赘

![image-20200303101522452](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101522452.png)

## 链式调用

![image-20200303101540274](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101540274.png)

## 装饰器的写法

![image-20200303101558221](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101558221.png)

![image-20200303101606583](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303101606583.png)

配置里面做配置

使用:装饰器只能用于class

![image-20200303102403491](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303102403491.png)

高阶组件声明在最上面

![image-20200303102453424](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303102453424.png)

用法

![image-20200303102521466](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303102521466.png)

## 除了HOC 还有一种组件扩展的方式

![image-20200303102922687](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303102922687.png)

![image-20200303103053814](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303103053814.png)

等同于vue的插槽



children就是JSX

拓展--->两个组件之间的交互问题

![image-20200303103403892](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303103403892.png)

![image-20200303103408573](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303103408573.png)







react里面的具名插槽

![image-20200303103802089](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303103802089.png)

![image-20200303103818607](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303103818607.png)

这就行了?

调用一个getUser 的API

在Fetch里面

UI显示的内容,实际是Fetch获取的数据

相当于vue里面的slot的什么功能??

![image-20200303104733731](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303104733731.png)

相当于作用域插槽 scope

这里不是特别懂

 这里面的大括号name,age里面的 相当于this.props.children

![image-20200303104958671](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303104958671.png)

更高级的作用

过滤器组件

过滤出指定的标签

React.Children是react提供给我们的一个静态接口

里面有一些方法

![image-20200303110216616](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303110216616.png)

![image-20200303110235481](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303110235481.png)



做一个RadioGroup组件

里面的Radio是父组件的children

遍历并且修改他们

修改的原因,原来的radio需要每一个都加一个label和name属性



![image-20200303110503674](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303110503674.png)

![image-20200303110622507](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303110622507.png)



这样写不对

Radio不是一个单标签

还有孩子呢

需要单独结构出来children

![image-20200303111312630](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303111312630.png)



![image-20200303110818941](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303110818941.png)

错误

props  这里的child是一个JSX语法,本身是不可改,不可扩充修改的

这是需要注意的地方

![image-20200303111056090](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303111056090.png)

![image-20200303111409353](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200303111409353.png)

prop.children是神马

就是一个普通的jsx

