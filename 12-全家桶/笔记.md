redux相比vuex来说,重点是没有异步的概念,需要借助中间件来实现

![image-20200229112817419](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112817419.png)

react-redux的provider内部实际上就是上下文

context

![image-20200229111629687](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229111629687.png)



connect本身返回的是一个函数

接受的参数是一个组件(无状态or有状态)

connect执行返回的结果是什么

高阶组件

![image-20200229112111106](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112111106.png)

直接从函数当中结构出来

![image-20200229112205410](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112205410.png)

当做完映射之后

组件当中就会添加这些所有的属性

包括需要dispatch的add本身方法和从store传递过来的store里面的num

把reducer抽离出来也叫重构



## 装饰器的写法(类class   我靠,之前一直是混杂写

![image-20200229112608005](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112608005.png)

![image-20200229112633632](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112633632.png)

![image-20200229112638506](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112638506.png)

![image-20200229112911522](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229112911522.png)

应用中间件的时候这里有一个额外的参数好像,复习



redux-thunk都干了什么事情

先派发一个undefined,没有名字的action,这个action是一个函数

并且这个action (函数

redux创建不了

只能redux-thunk来处理

所以说redux-thunk的功能就是允许redux返回一个函数



当发现是一个函数的时候

会先调用这个函数

结束之后再dispatch



![image-20200229114635966](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229114635966.png)

应该封装一个service层做业务处理

![image-20200229120148951](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229120148951.png)

![image-20200229120203579](C:\Users\Artificial\AppData\Roaming\Typora\typora-user-images\image-20200229120203579.png)